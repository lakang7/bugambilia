CREATE TABLE usuario (
    idusuario mediumint(8) unsigned auto_increment,
    nombre varchar(60) not null,
    usuario varchar(20) not null,
    contraseña varchar(20) not null,
    correo varchar(60) not null,
    registro TIMESTAMP not null,
    puesto varchar(60) not null,
    telefono varchar(20) not null,
    avatar varchar(60),
    PRIMARY KEY (idusuario)    
);

insert into usuario (nombre,usuario,contraseña,correo,registro,avatar) values("Lakhsmi Angarita","lakang","123456","lakang7@gmail.com",now(),"avatarlakhsmi.png");

CREATE TABLE menu(
    idmenu mediumint(8) unsigned auto_increment,
    nombre varchar(60) not null,
    descripcion varchar(120) null,
    icono varchar(60) not null,
    posicion integer not null,
    PRIMARY KEY (idmenu)
);

insert into menu (nombre,icono,posicion) values("Clientes","menu-icon fa fa-globe",1);
insert into menu (nombre,icono,posicion) values("Productos","menu-icon fa fa-flask",2);
insert into menu (nombre,icono,posicion) values("Lista de Precios","menu-icon glyphicon glyphicon-list-alt",3);
insert into menu (nombre,icono,posicion) values("Ordenes de Compra","menu-icon glyphicon glyphicon-tags",4);
insert into menu (nombre,icono,posicion) values("Ordenes de Producción","menu-icon glyphicon glyphicon-user",5);
insert into menu (nombre,icono,posicion) values("Configuración","menu-icon glyphicon glyphicon-cog",8);
insert into menu (nombre,icono,posicion) values("Facturación","menu-icon glyphicon glyphicon-usd",6);
insert into menu (nombre,icono,posicion) values("Reportes","menu-icon glyphicon glyphicon-paperclip",7);

CREATE TABLE submenu(
    idsubmenu mediumint(8) unsigned auto_increment,
    idmenu mediumint(8) unsigned not null,
    nombre varchar(60) not null,
    descripcion varchar(120) null,
    pagina varchar(200) not null,
    abre integer not null,
    PRIMARY KEY (idsubmenu),
    FOREIGN KEY (idmenu) REFERENCES menu(idmenu) ON UPDATE CASCADE ON DELETE RESTRICT
);

insert into submenu (idmenu,nombre,pagina,abre) values(1,"Empresas","listarempresas.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(1,"Sucursales","listarsucursales.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(1,"Contactos","listarcontactos.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(2,"Materiales","listarmateriales.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(2,"Patrones","listarpatrones.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(2,"Productos","listarproductos.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(3,"Lista de Precios","listarlistadeprecios.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(4,"Ordenes de Compra","listarordenesdecompra.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(5,"Ordenes de Producción","listarordenesdeproduccion.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(6,"Usuarios del Sistema","listarusuarios.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(6,"Parametrizacion","configuracionsistema.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(7,"Facturas Emitidas","listarfacturas.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(8,"Cuentas por Cobrar","pdfs/cuentasporcobrar.php",1);
insert into submenu (idmenu,nombre,pagina,abre) values(8,"Ventas por Productos","reporteventasporproducto.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(8,"Ventas por Colores","reporteventasporcolores.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(8,"Ordenes de Compra Canceladas","reporteoccanceladas.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(8,"Ordenes de Producción Canceladas","reporteopcanceladas.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(7,"Facturas Canceladas","listarfacturascanceladas.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(8,"Reporte de Historicos","reportehistoricos.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(8,"Reporte de Ventas","reporteventasdesdehasta.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(8,"Cuentas por Pagar","pdfs/cuentasporpagar.php",1);
insert into submenu (idmenu,nombre,pagina,abre) values(5,"Pago de Regalias","listarpagosderegalias.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(8,"Regalias por Pagar","pdfs/regaliasporpagar.php",1);
insert into submenu (idmenu,nombre,pagina,abre) values(8,"Reporte de Ventas Por Empresa","reporteventasporempresadesdehasta.php",0);
insert into submenu (idmenu,nombre,pagina,abre) values(8,"Reporte de Ventas Por Empresa y Sucursales","reporteventasporempresadesdehastasucursal.php",0);

CREATE TABLE opsubmenu(
    idopsubmenu mediumint(8) unsigned auto_increment,
    idsubmenu mediumint(8) unsigned not null,
    indice integer not null,
    nombre varchar(30) not null,
    PRIMARY KEY (idopsubmenu),
    FOREIGN KEY (idsubmenu) REFERENCES submenu(idsubmenu) ON UPDATE CASCADE ON DELETE RESTRICT    
);

insert into opsubmenu (idsubmenu,indice,nombre) values(1,1,"Agregar");
insert into opsubmenu (idsubmenu,indice,nombre) values(1,2,"Listar");
insert into opsubmenu (idsubmenu,indice,nombre) values(1,3,"Editar");
insert into opsubmenu (idsubmenu,indice,nombre) values(1,4,"Informe en PDF");
insert into opsubmenu (idsubmenu,indice,nombre) values(1,5,"Eliminar Empresa");

insert into opsubmenu (idsubmenu,indice,nombre) values(2,1,"Agregar");
insert into opsubmenu (idsubmenu,indice,nombre) values(2,2,"Listar");
insert into opsubmenu (idsubmenu,indice,nombre) values(2,3,"Editar");
insert into opsubmenu (idsubmenu,indice,nombre) values(2,4,"Eliminar Sucursal");

insert into opsubmenu (idsubmenu,indice,nombre) values(3,1,"Agregar");
insert into opsubmenu (idsubmenu,indice,nombre) values(3,2,"Listar");
insert into opsubmenu (idsubmenu,indice,nombre) values(3,3,"Editar");
insert into opsubmenu (idsubmenu,indice,nombre) values(3,4,"Eliminar Contacto");

insert into opsubmenu (idsubmenu,indice,nombre) values(4,1,"Agregar");
insert into opsubmenu (idsubmenu,indice,nombre) values(4,2,"Listar");
insert into opsubmenu (idsubmenu,indice,nombre) values(4,3,"Editar");
insert into opsubmenu (idsubmenu,indice,nombre) values(4,4,"Eliminar Material");

insert into opsubmenu (idsubmenu,indice,nombre) values(5,1,"Agregar");
insert into opsubmenu (idsubmenu,indice,nombre) values(5,2,"Listar");
insert into opsubmenu (idsubmenu,indice,nombre) values(5,3,"Editar");
insert into opsubmenu (idsubmenu,indice,nombre) values(5,4,"Informe en PDF");
insert into opsubmenu (idsubmenu,indice,nombre) values(5,5,"Eliminar Patron de Producto");

insert into opsubmenu (idsubmenu,indice,nombre) values(6,1,"Agregar");
insert into opsubmenu (idsubmenu,indice,nombre) values(6,2,"Listar");
insert into opsubmenu (idsubmenu,indice,nombre) values(6,3,"Editar");
insert into opsubmenu (idsubmenu,indice,nombre) values(6,4,"Informe en PDF");
insert into opsubmenu (idsubmenu,indice,nombre) values(6,5,"Eliminar Producto");
insert into opsubmenu (idsubmenu,indice,nombre) values(6,6,"Visualizar Ficha Tecnica");

insert into opsubmenu (idsubmenu,indice,nombre) values(7,1,"Agregar");
insert into opsubmenu (idsubmenu,indice,nombre) values(7,2,"Listar");
insert into opsubmenu (idsubmenu,indice,nombre) values(7,3,"Editar");
insert into opsubmenu (idsubmenu,indice,nombre) values(7,4,"Visualizar");
insert into opsubmenu (idsubmenu,indice,nombre) values(7,5,"Excepciones");
insert into opsubmenu (idsubmenu,indice,nombre) values(7,6,"Exportar en PDF");
insert into opsubmenu (idsubmenu,indice,nombre) values(7,7,"Exportar en Excel");
insert into opsubmenu (idsubmenu,indice,nombre) values(7,8,"Exportar Para Clientes PDF");
insert into opsubmenu (idsubmenu,indice,nombre) values(7,9,"Exportar Para Clientes Excel");
insert into opsubmenu (idsubmenu,indice,nombre) values(7,10,"Eliminar Lista de Precios");

insert into opsubmenu (idsubmenu,indice,nombre) values(8,1,"Agregar");
insert into opsubmenu (idsubmenu,indice,nombre) values(8,2,"Listar");
insert into opsubmenu (idsubmenu,indice,nombre) values(8,3,"Editar");
insert into opsubmenu (idsubmenu,indice,nombre) values(8,4,"Exportar en PDF");
insert into opsubmenu (idsubmenu,indice,nombre) values(8,5,"Cancelar");
insert into opsubmenu (idsubmenu,indice,nombre) values(8,6,"Generar Orden de Producción");
insert into opsubmenu (idsubmenu,indice,nombre) values(8,7,"Facturar Orden de Compra");
insert into opsubmenu (idsubmenu,indice,nombre) values(8,8,"Enviar por Email");


insert into opsubmenu (idsubmenu,indice,nombre) values(9,1,"Listar");
insert into opsubmenu (idsubmenu,indice,nombre) values(9,2,"Editar");
insert into opsubmenu (idsubmenu,indice,nombre) values(9,3,"Informe en PDF");
insert into opsubmenu (idsubmenu,indice,nombre) values(9,4,"Cancelar");
insert into opsubmenu (idsubmenu,indice,nombre) values(9,5,"Pagar");
insert into opsubmenu (idsubmenu,indice,nombre) values(9,6,"Enviar por Email");

insert into opsubmenu (idsubmenu,indice,nombre) values(10,1,"Agregar");
insert into opsubmenu (idsubmenu,indice,nombre) values(10,2,"Listar");
insert into opsubmenu (idsubmenu,indice,nombre) values(10,3,"Editar");

insert into opsubmenu (idsubmenu,indice,nombre) values(11,1,"Editar");

insert into opsubmenu (idsubmenu,indice,nombre) values(12,1,"Listar");
insert into opsubmenu (idsubmenu,indice,nombre) values(12,2,"Descargar");
insert into opsubmenu (idsubmenu,indice,nombre) values(12,3,"Pagar");
insert into opsubmenu (idsubmenu,indice,nombre) values(12,4,"Cancelar");
insert into opsubmenu (idsubmenu,indice,nombre) values(12,5,"Enviar por Email");

insert into opsubmenu (idsubmenu,indice,nombre) values(13,1,"Visualizar");
insert into opsubmenu (idsubmenu,indice,nombre) values(14,1,"Visualizar");
insert into opsubmenu (idsubmenu,indice,nombre) values(15,1,"Visualizar");
insert into opsubmenu (idsubmenu,indice,nombre) values(16,1,"Visualizar");
insert into opsubmenu (idsubmenu,indice,nombre) values(17,1,"Visualizar");

insert into opsubmenu (idsubmenu,indice,nombre) values(18,1,"Listar");
insert into opsubmenu (idsubmenu,indice,nombre) values(18,2,"Nota de Credito");

insert into opsubmenu (idsubmenu,indice,nombre) values(19,1,"Visualizar");
insert into opsubmenu (idsubmenu,indice,nombre) values(20,1,"Visualizar");

insert into opsubmenu (idsubmenu,indice,nombre) values(21,1,"Visualizar");

insert into opsubmenu (idsubmenu,indice,nombre) values(22,1,"Listar");
insert into opsubmenu (idsubmenu,indice,nombre) values(22,2,"Pagar");

insert into opsubmenu (idsubmenu,indice,nombre) values(23,1,"Visualizar");
insert into opsubmenu (idsubmenu,indice,nombre) values(24,1,"Visualizar");
insert into opsubmenu (idsubmenu,indice,nombre) values(25,1,"Visualizar");

CREATE TABLE menualto(
    idmenualto mediumint(8) unsigned auto_increment,
    idmenu mediumint(8) unsigned not null,
    idusuario mediumint(8) unsigned not null,
    PRIMARY KEY (idmenualto),
    FOREIGN KEY (idmenu) REFERENCES menu(idmenu) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idusuario) REFERENCES usuario(idusuario) ON UPDATE CASCADE ON DELETE RESTRICT
);

insert into menualto (idmenu,idusuario) values(1,1);
insert into menualto (idmenu,idusuario) values(2,1);
insert into menualto (idmenu,idusuario) values(3,1);
insert into menualto (idmenu,idusuario) values(4,1);
insert into menualto (idmenu,idusuario) values(5,1);
insert into menualto (idmenu,idusuario) values(6,1);
insert into menualto (idmenu,idusuario) values(7,1);
insert into menualto (idmenu,idusuario) values(8,1);

CREATE TABLE privilegio(
    idprivilegio mediumint(8) unsigned auto_increment,
    idmenualto mediumint(8) unsigned not null, 
    idsubmenu mediumint(8) unsigned not null,
    accion01 integer not null,
    accion02 integer not null,
    accion03 integer not null,
    accion04 integer not null,
    accion05 integer not null,
    accion06 integer not null,
    accion07 integer not null,
    accion08 integer not null,
    accion09 integer not null,
    accion10 integer not null,
    PRIMARY KEY (idprivilegio),
    FOREIGN KEY (idmenualto) REFERENCES menualto(idmenualto) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idsubmenu) REFERENCES submenu(idsubmenu) ON UPDATE CASCADE ON DELETE RESTRICT
);

insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(1,1,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(1,2,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(1,3,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(2,4,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(2,5,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(2,6,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(3,7,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(4,8,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(5,9,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(6,10,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(6,11,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(7,12,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(7,18,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(8,13,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(8,14,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(8,15,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(8,16,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(8,17,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(8,19,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(8,20,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(8,21,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(5,22,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(8,23,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(8,24,1,1,1,1,1,1,1,1,1,1);
insert into privilegio (idmenualto,idsubmenu,accion01,accion02,accion03,accion04,accion05,accion06,accion07,accion08,accion09,accion10) values(8,25,1,1,1,1,1,1,1,1,1,1);


CREATE TABLE tabla (
    idtabla mediumint(8) unsigned auto_increment,
    nombre varchar(30) not null,
    descripcion varchar(200) null,
    PRIMARY KEY (idtabla)  
);

insert into tabla (nombre) values("Empresas");
insert into tabla (nombre) values("Sucursales");
insert into tabla (nombre) values("Contactos");
insert into tabla (nombre) values("Materiales");
insert into tabla (nombre) values("Patrones");
insert into tabla (nombre) values("Productos");

CREATE TABLE accion (
    idaccion mediumint(8) unsigned auto_increment,
    nombre varchar(30) not null,
    descripcion varchar(200) null,
    PRIMARY KEY (idaccion)  
);

insert into accion (nombre, descripcion) values("Inicio de Sessión","Un usuario del sistema inicia sesión en el mismo.");
insert into accion (nombre, descripcion) values("Cierre de Sessión","Un usuario del sistema finaliza su sesión en el mismo.");
insert into accion (nombre, descripcion) values("Creación de Registro","Se inserta un nuevo registro en la base de datos.");
insert into accion (nombre, descripcion) values("Edición de Registro","Se edita un registro ya existente en la base de datos.");
insert into accion (nombre, descripcion) values("Eliminación de Registro","Se elimina un registro de la base de datos.");
insert into accion (nombre, descripcion) values("Exportar en PDF","Se genera y exporta un reporte del sistema en fomato PDF.");
insert into accion (nombre, descripcion) values("Exportar en Excel","Se genera y exporta un reporte del sistema en fomato excel.");

CREATE TABLE bitacora (
    idbitacora mediumint(8) unsigned auto_increment,
    idusuario mediumint(8) unsigned not null,
    idaccion mediumint(8) unsigned not null,
    idtabla mediumint(8) unsigned null,
    momento TIMESTAMP not null,
    descripcion varchar(1200) not null,
    PRIMARY KEY (idbitacora),
    FOREIGN KEY (idusuario) REFERENCES usuario(idusuario) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idaccion) REFERENCES accion(idaccion) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idtabla) REFERENCES tabla(idtabla) ON UPDATE CASCADE ON DELETE RESTRICT
);













CREATE TABLE pais (
    idpais mediumint(8) unsigned auto_increment,
    nombre varchar(60) not null,
    identificador varchar(2) not null,
    PRIMARY KEY (idpais)
);

INSERT INTO pais(nombre,identificador) VALUES ("México","MX");
INSERT INTO pais(nombre,identificador) VALUES ("Estados Unidos","US");
INSERT INTO pais(nombre,identificador) VALUES ("Panama","PA");
INSERT INTO pais(nombre,identificador) VALUES ("Costa Rica","CR");
INSERT INTO pais(nombre,identificador) VALUES ("Republica Dominicana","RD");
INSERT INTO pais(nombre,identificador) VALUES ("Colombia","CO");
INSERT INTO pais(nombre,identificador) VALUES ("Guatemala","GU");
INSERT INTO pais(nombre,identificador) VALUES ("El Salvador","EL");
INSERT INTO pais(nombre,identificador) VALUES ("Chile","CH");
INSERT INTO pais(nombre,identificador) VALUES ("Jamaica","JA");
INSERT INTO pais(nombre,identificador) VALUES ("Brasil","BR");
INSERT INTO pais(nombre,identificador) VALUES ("Aruba","AR");

CREATE TABLE estado (
    idestado mediumint(8) unsigned auto_increment,
    idpais mediumint(8) unsigned not null,
    nombre varchar(60) not null,
    PRIMARY KEY (idestado),
    FOREIGN KEY (idpais) REFERENCES pais(idpais) ON UPDATE CASCADE ON DELETE RESTRICT
);

INSERT INTO estado(idpais,nombre) VALUES (1,"Aguascalientes");
INSERT INTO estado(idpais,nombre) VALUES (1,"Baja California");
INSERT INTO estado(idpais,nombre) VALUES (1,"Baja California Sur");
INSERT INTO estado(idpais,nombre) VALUES (1,"Campeche");
INSERT INTO estado(idpais,nombre) VALUES (1,"Chiapas");
INSERT INTO estado(idpais,nombre) VALUES (1,"Chihuahua");
INSERT INTO estado(idpais,nombre) VALUES (1,"Coahuila");
INSERT INTO estado(idpais,nombre) VALUES (1,"Colima");
INSERT INTO estado(idpais,nombre) VALUES (1,"Distrito Federal");
INSERT INTO estado(idpais,nombre) VALUES (1,"Durango");
INSERT INTO estado(idpais,nombre) VALUES (1,"Estado de México");
INSERT INTO estado(idpais,nombre) VALUES (1,"Guanajuato");
INSERT INTO estado(idpais,nombre) VALUES (1,"Guerrero");
INSERT INTO estado(idpais,nombre) VALUES (1,"Hidalgo");
INSERT INTO estado(idpais,nombre) VALUES (1,"Jalisco");
INSERT INTO estado(idpais,nombre) VALUES (1,"Michoacán");
INSERT INTO estado(idpais,nombre) VALUES (1,"Morelos");
INSERT INTO estado(idpais,nombre) VALUES (1,"Nayarit");
INSERT INTO estado(idpais,nombre) VALUES (1,"Nuevo León");
INSERT INTO estado(idpais,nombre) VALUES (1,"Oaxaca");
INSERT INTO estado(idpais,nombre) VALUES (1,"Puebla");
INSERT INTO estado(idpais,nombre) VALUES (1,"Querétaro");
INSERT INTO estado(idpais,nombre) VALUES (1,"Quintana Roo");
INSERT INTO estado(idpais,nombre) VALUES (1,"San Luis Potosí");
INSERT INTO estado(idpais,nombre) VALUES (1,"Sinaloa");
INSERT INTO estado(idpais,nombre) VALUES (1,"Sonora");
INSERT INTO estado(idpais,nombre) VALUES (1,"Tabasco");
INSERT INTO estado(idpais,nombre) VALUES (1,"Tamaulipas");
INSERT INTO estado(idpais,nombre) VALUES (1,"Tlaxcala");
INSERT INTO estado(idpais,nombre) VALUES (1,"Veracruz");
INSERT INTO estado(idpais,nombre) VALUES (1,"Yucatán");
INSERT INTO estado(idpais,nombre) VALUES (1,"Zacatecas");

INSERT INTO estado(idpais,nombre) VALUES (2,"Alabama");
INSERT INTO estado(idpais,nombre) VALUES (2,"Alaska");
INSERT INTO estado(idpais,nombre) VALUES (2,"Arizona");
INSERT INTO estado(idpais,nombre) VALUES (2,"Arkansas");
INSERT INTO estado(idpais,nombre) VALUES (2,"California");
INSERT INTO estado(idpais,nombre) VALUES (2,"Colorado");
INSERT INTO estado(idpais,nombre) VALUES (2,"Connecticut");
INSERT INTO estado(idpais,nombre) VALUES (2,"Delaware");
INSERT INTO estado(idpais,nombre) VALUES (2,"District of Columbia");
INSERT INTO estado(idpais,nombre) VALUES (2,"Florida");
INSERT INTO estado(idpais,nombre) VALUES (2,"Georgia");
INSERT INTO estado(idpais,nombre) VALUES (2,"Hawaii");
INSERT INTO estado(idpais,nombre) VALUES (2,"Idaho");
INSERT INTO estado(idpais,nombre) VALUES (2,"Illinois");
INSERT INTO estado(idpais,nombre) VALUES (2,"Indiana");
INSERT INTO estado(idpais,nombre) VALUES (2,"Iowa");
INSERT INTO estado(idpais,nombre) VALUES (2,"Kansas");
INSERT INTO estado(idpais,nombre) VALUES (2,"Kentucky");
INSERT INTO estado(idpais,nombre) VALUES (2,"Louisiana");
INSERT INTO estado(idpais,nombre) VALUES (2,"Maine");
INSERT INTO estado(idpais,nombre) VALUES (2,"Maryland");
INSERT INTO estado(idpais,nombre) VALUES (2,"Massachusetts");
INSERT INTO estado(idpais,nombre) VALUES (2,"Michigan");
INSERT INTO estado(idpais,nombre) VALUES (2,"Minnesota");
INSERT INTO estado(idpais,nombre) VALUES (2,"Mississippi");
INSERT INTO estado(idpais,nombre) VALUES (2,"Misuri");
INSERT INTO estado(idpais,nombre) VALUES (2,"Montana");
INSERT INTO estado(idpais,nombre) VALUES (2,"Nebraska");
INSERT INTO estado(idpais,nombre) VALUES (2,"Nevada");
INSERT INTO estado(idpais,nombre) VALUES (2,"New Hampshire");
INSERT INTO estado(idpais,nombre) VALUES (2,"New Jersey");
INSERT INTO estado(idpais,nombre) VALUES (2,"New Mexico");
INSERT INTO estado(idpais,nombre) VALUES (2,"New York");
INSERT INTO estado(idpais,nombre) VALUES (2,"North Carolina");
INSERT INTO estado(idpais,nombre) VALUES (2,"North Dakota");
INSERT INTO estado(idpais,nombre) VALUES (2,"Ohio");
INSERT INTO estado(idpais,nombre) VALUES (2,"Oklahoma");
INSERT INTO estado(idpais,nombre) VALUES (2,"Oregon");
INSERT INTO estado(idpais,nombre) VALUES (2,"Pennsylvania");
INSERT INTO estado(idpais,nombre) VALUES (2,"Rhode Island");
INSERT INTO estado(idpais,nombre) VALUES (2,"South Carolina");
INSERT INTO estado(idpais,nombre) VALUES (2,"South Dakota");
INSERT INTO estado(idpais,nombre) VALUES (2,"Tennessee");
INSERT INTO estado(idpais,nombre) VALUES (2,"Texas");
INSERT INTO estado(idpais,nombre) VALUES (2,"Utah");
INSERT INTO estado(idpais,nombre) VALUES (2,"Vermont");
INSERT INTO estado(idpais,nombre) VALUES (2,"Virginia");
INSERT INTO estado(idpais,nombre) VALUES (2,"Washington");
INSERT INTO estado(idpais,nombre) VALUES (2,"West Virginia");
INSERT INTO estado(idpais,nombre) VALUES (2,"Wisconsin");
INSERT INTO estado(idpais,nombre) VALUES (2,"Wyoming");

INSERT INTO estado(idpais,nombre) VALUES (3,"Bocas del Toro");
INSERT INTO estado(idpais,nombre) VALUES (3,"Coclé");
INSERT INTO estado(idpais,nombre) VALUES (3,"Colón");
INSERT INTO estado(idpais,nombre) VALUES (3,"Chiriqui");
INSERT INTO estado(idpais,nombre) VALUES (3,"Darién");
INSERT INTO estado(idpais,nombre) VALUES (3,"Herrera");
INSERT INTO estado(idpais,nombre) VALUES (3,"Los Santos");
INSERT INTO estado(idpais,nombre) VALUES (3,"Panamá");
INSERT INTO estado(idpais,nombre) VALUES (3,"Veraguas");
INSERT INTO estado(idpais,nombre) VALUES (3,"Panamá Oeste");

INSERT INTO estado(idpais,nombre) VALUES (4,"San José");
INSERT INTO estado(idpais,nombre) VALUES (4,"Alajuela");
INSERT INTO estado(idpais,nombre) VALUES (4,"Cartago");
INSERT INTO estado(idpais,nombre) VALUES (4,"Heredia");
INSERT INTO estado(idpais,nombre) VALUES (4,"Liberia");
INSERT INTO estado(idpais,nombre) VALUES (4,"Puntarenas");
INSERT INTO estado(idpais,nombre) VALUES (4,"Limón");

INSERT INTO estado(idpais,nombre) VALUES (5,"Azua");
INSERT INTO estado(idpais,nombre) VALUES (5,"Bahoruco");
INSERT INTO estado(idpais,nombre) VALUES (5,"Harahona");
INSERT INTO estado(idpais,nombre) VALUES (5,"Dajabón");
INSERT INTO estado(idpais,nombre) VALUES (5,"Distrito Nacional");
INSERT INTO estado(idpais,nombre) VALUES (5,"Duarte");
INSERT INTO estado(idpais,nombre) VALUES (5,"Elías Piña");
INSERT INTO estado(idpais,nombre) VALUES (5,"El Seibo");
INSERT INTO estado(idpais,nombre) VALUES (5,"Espaillat");
INSERT INTO estado(idpais,nombre) VALUES (5,"Hato Mayor");
INSERT INTO estado(idpais,nombre) VALUES (5,"Hermanas Mirabal");
INSERT INTO estado(idpais,nombre) VALUES (5,"Independencia");
INSERT INTO estado(idpais,nombre) VALUES (5,"La Altagracia");
INSERT INTO estado(idpais,nombre) VALUES (5,"La Romana");
INSERT INTO estado(idpais,nombre) VALUES (5,"La Vega");
INSERT INTO estado(idpais,nombre) VALUES (5,"Mará Trinidad Sánchez");
INSERT INTO estado(idpais,nombre) VALUES (5,"Monseñor Nouel");
INSERT INTO estado(idpais,nombre) VALUES (5,"Monte Cristi");
INSERT INTO estado(idpais,nombre) VALUES (5,"Monte Plata");
INSERT INTO estado(idpais,nombre) VALUES (5,"Pedernales");
INSERT INTO estado(idpais,nombre) VALUES (5,"Peravia");
INSERT INTO estado(idpais,nombre) VALUES (5,"Puerto Plata");
INSERT INTO estado(idpais,nombre) VALUES (5,"Samaná");
INSERT INTO estado(idpais,nombre) VALUES (5,"Sánchez Ramírez");
INSERT INTO estado(idpais,nombre) VALUES (5,"San Cistóbal");
INSERT INTO estado(idpais,nombre) VALUES (5,"San José de Ocoa");
INSERT INTO estado(idpais,nombre) VALUES (5,"San Juan");
INSERT INTO estado(idpais,nombre) VALUES (5,"San Pedro de Macorís");
INSERT INTO estado(idpais,nombre) VALUES (5,"Santiago");
INSERT INTO estado(idpais,nombre) VALUES (5,"Santiago Rodríguez");
INSERT INTO estado(idpais,nombre) VALUES (5,"Santodomingo");
INSERT INTO estado(idpais,nombre) VALUES (5,"Valverde");

INSERT INTO estado(idpais,nombre) VALUES (6,"Antioquia");
INSERT INTO estado(idpais,nombre) VALUES (6,"Caldas");
INSERT INTO estado(idpais,nombre) VALUES (6,"Bogotá");
INSERT INTO estado(idpais,nombre) VALUES (6,"Bolivar");
INSERT INTO estado(idpais,nombre) VALUES (6,"San Andrés y Providencia");
INSERT INTO estado(idpais,nombre) VALUES (6,"Córdoba");
INSERT INTO estado(idpais,nombre) VALUES (6,"Sucre");
INSERT INTO estado(idpais,nombre) VALUES (6,"Atlántico");
INSERT INTO estado(idpais,nombre) VALUES (6,"Boyacá");
INSERT INTO estado(idpais,nombre) VALUES (6,"Arauca");
INSERT INTO estado(idpais,nombre) VALUES (6,"Casanare");
INSERT INTO estado(idpais,nombre) VALUES (6,"Cauca");
INSERT INTO estado(idpais,nombre) VALUES (6,"Valle del Cauca");
INSERT INTO estado(idpais,nombre) VALUES (6,"Chocó");
INSERT INTO estado(idpais,nombre) VALUES (6,"Nariño");
INSERT INTO estado(idpais,nombre) VALUES (6,"Quindío");
INSERT INTO estado(idpais,nombre) VALUES (6,"Risaralda");
INSERT INTO estado(idpais,nombre) VALUES (6,"Caquetá");
INSERT INTO estado(idpais,nombre) VALUES (6,"Amazonas");
INSERT INTO estado(idpais,nombre) VALUES (6,"Guainía");
INSERT INTO estado(idpais,nombre) VALUES (6,"Guaviare");
INSERT INTO estado(idpais,nombre) VALUES (6,"Vaupés");
INSERT INTO estado(idpais,nombre) VALUES (6,"Putumayo");
INSERT INTO estado(idpais,nombre) VALUES (6,"Cundinamarca");
INSERT INTO estado(idpais,nombre) VALUES (6,"Meta");
INSERT INTO estado(idpais,nombre) VALUES (6,"Vichada");
INSERT INTO estado(idpais,nombre) VALUES (6,"Magdalena");
INSERT INTO estado(idpais,nombre) VALUES (6,"Cesar");
INSERT INTO estado(idpais,nombre) VALUES (6,"La Guajira");
INSERT INTO estado(idpais,nombre) VALUES (6,"Santander");
INSERT INTO estado(idpais,nombre) VALUES (6,"Norte de Santander");
INSERT INTO estado(idpais,nombre) VALUES (6,"Tolima");
INSERT INTO estado(idpais,nombre) VALUES (6,"Huila");

INSERT INTO estado(idpais,nombre) VALUES (7,"Alta Verapaz");
INSERT INTO estado(idpais,nombre) VALUES (7,"Baja Verapaz");
INSERT INTO estado(idpais,nombre) VALUES (7,"Chimaltenango");
INSERT INTO estado(idpais,nombre) VALUES (7,"Chiquimula");
INSERT INTO estado(idpais,nombre) VALUES (7,"Péten");
INSERT INTO estado(idpais,nombre) VALUES (7,"El Progreso");
INSERT INTO estado(idpais,nombre) VALUES (7,"Quiché");
INSERT INTO estado(idpais,nombre) VALUES (7,"Escuintla");
INSERT INTO estado(idpais,nombre) VALUES (7,"Guatemala");
INSERT INTO estado(idpais,nombre) VALUES (7,"Huehuetenango");
INSERT INTO estado(idpais,nombre) VALUES (7,"Izabal");
INSERT INTO estado(idpais,nombre) VALUES (7,"Jalapa");
INSERT INTO estado(idpais,nombre) VALUES (7,"Jutiapa");
INSERT INTO estado(idpais,nombre) VALUES (7,"Quetzaltenango");
INSERT INTO estado(idpais,nombre) VALUES (7,"Retalhuleu");
INSERT INTO estado(idpais,nombre) VALUES (7,"Sacatepéquez");
INSERT INTO estado(idpais,nombre) VALUES (7,"San Marcos");
INSERT INTO estado(idpais,nombre) VALUES (7,"Santa Rosa");
INSERT INTO estado(idpais,nombre) VALUES (7,"Sololá");
INSERT INTO estado(idpais,nombre) VALUES (7,"Suchitepéquez");
INSERT INTO estado(idpais,nombre) VALUES (7,"Totonicapán");
INSERT INTO estado(idpais,nombre) VALUES (7,"Zacapa");

INSERT INTO estado(idpais,nombre) VALUES (8,"Ahuachapán");
INSERT INTO estado(idpais,nombre) VALUES (8,"Santa Ana");
INSERT INTO estado(idpais,nombre) VALUES (8,"Sonsonate");
INSERT INTO estado(idpais,nombre) VALUES (8,"La Libertad");
INSERT INTO estado(idpais,nombre) VALUES (8,"Chalatenango");
INSERT INTO estado(idpais,nombre) VALUES (8,"Cuscatlán");
INSERT INTO estado(idpais,nombre) VALUES (8,"San Salvador");
INSERT INTO estado(idpais,nombre) VALUES (8,"La Paz");
INSERT INTO estado(idpais,nombre) VALUES (8,"Cabañas");
INSERT INTO estado(idpais,nombre) VALUES (8,"San Vicente");
INSERT INTO estado(idpais,nombre) VALUES (8,"Usulután");
INSERT INTO estado(idpais,nombre) VALUES (8,"San Miguel");
INSERT INTO estado(idpais,nombre) VALUES (8,"Morazán");
INSERT INTO estado(idpais,nombre) VALUES (8,"La Unión");

INSERT INTO estado(idpais,nombre) VALUES (9,"Arica y Parinacota");
INSERT INTO estado(idpais,nombre) VALUES (9,"Tarapacá");
INSERT INTO estado(idpais,nombre) VALUES (9,"Antofagasta");
INSERT INTO estado(idpais,nombre) VALUES (9,"Atacama");
INSERT INTO estado(idpais,nombre) VALUES (9,"Coquimbo");
INSERT INTO estado(idpais,nombre) VALUES (9,"Valparaiso");
INSERT INTO estado(idpais,nombre) VALUES (9,"Libertador General");
INSERT INTO estado(idpais,nombre) VALUES (9,"Maule");
INSERT INTO estado(idpais,nombre) VALUES (9,"Biobío");
INSERT INTO estado(idpais,nombre) VALUES (9,"Araucanía");
INSERT INTO estado(idpais,nombre) VALUES (9,"Los Ríos");
INSERT INTO estado(idpais,nombre) VALUES (9,"Los Lagos");
INSERT INTO estado(idpais,nombre) VALUES (9,"Aysén del General");
INSERT INTO estado(idpais,nombre) VALUES (9,"Magallanes y de la Antártica Chilena");
INSERT INTO estado(idpais,nombre) VALUES (9,"Metropolitana de Santiago");

INSERT INTO estado(idpais,nombre) VALUES (10,"Hanover");
INSERT INTO estado(idpais,nombre) VALUES (10,"Saint Elizabeth");
INSERT INTO estado(idpais,nombre) VALUES (10,"Saint James");
INSERT INTO estado(idpais,nombre) VALUES (10,"Trelawny");
INSERT INTO estado(idpais,nombre) VALUES (10,"Westmoreland");
INSERT INTO estado(idpais,nombre) VALUES (10,"Clarendon");
INSERT INTO estado(idpais,nombre) VALUES (10,"Manchester");
INSERT INTO estado(idpais,nombre) VALUES (10,"Saint Ann");
INSERT INTO estado(idpais,nombre) VALUES (10,"Saint Catherine");
INSERT INTO estado(idpais,nombre) VALUES (10,"Saint Mary");
INSERT INTO estado(idpais,nombre) VALUES (10,"Kingston");
INSERT INTO estado(idpais,nombre) VALUES (10,"Portland");
INSERT INTO estado(idpais,nombre) VALUES (10,"Saint Andrew");
INSERT INTO estado(idpais,nombre) VALUES (10,"Saint Thomas");

INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Acre");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Alagoas");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Amapá");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Amazonas");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Bahía");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Ceará");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Espírito Santo");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Goiás");
INSERT INTO estado(idpais,nombre) VALUES (11,"Esatdo de Maranhao");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Mato Grosso");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Mato Grosso del Sur");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Minas Gerais");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Pará");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Paraíba");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Paraná");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Pernambuco");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Piauí");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Río de Janeiro");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Río Grande del Norte");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Río Grande del Sur");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Rondonia");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Roraima");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Santa Catarina");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado e Sao Paulo");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Sergipe");
INSERT INTO estado(idpais,nombre) VALUES (11,"Estado de Tocantins");
INSERT INTO estado(idpais,nombre) VALUES (11,"Distrito Federal");
INSERT INTO estado(idpais,nombre) VALUES (11,"República Federal de Brasil");

INSERT INTO estado(idpais,nombre) VALUES (12,"Tanki Leendert");
INSERT INTO estado(idpais,nombre) VALUES (12,"Oranjestad Oeste");
INSERT INTO estado(idpais,nombre) VALUES (12,"Oranjestad Este");
INSERT INTO estado(idpais,nombre) VALUES (12,"Paradera");
INSERT INTO estado(idpais,nombre) VALUES (12,"San Nicolas Norte");
INSERT INTO estado(idpais,nombre) VALUES (12,"San Nicolas Sur");
INSERT INTO estado(idpais,nombre) VALUES (12,"Santa Cruz");
INSERT INTO estado(idpais,nombre) VALUES (12,"Savaneta");

CREATE TABLE empresa (
    idempresa mediumint(8) unsigned auto_increment,
    nombreempresa varchar(120) not null,    
    nombrecomercial varchar(120),
    telefonoprincipal varchar(30) not null,
    identificador varchar(40) not null,
    idpais mediumint(8) unsigned not null,
    fiscalcalle varchar(60),
    fiscalexterior varchar(30),
    fiscalinterior varchar(30),
    fiscalcolonia varchar(60),
    fiscalciudad varchar(30),
    fiscalestado varchar(30),
    fiscalpostal varchar(10),
    entregacalle varchar(60),
    entregaexterior varchar(30),
    entregainterior varchar(30),
    entregacolonia varchar(60),
    entregaciudad varchar(30),
    entregaestado varchar(30),
    entregapostal varchar(10),
    entregareferencia varchar(250),
    codigo varchar(20),
    registro TIMESTAMP not null,
    iva integer not null,
    metododepago integer not null,
    banco varchar(30),
    ultimos varchar(4),
    comexportacion varchar(60),
    PRIMARY KEY (idempresa),
    FOREIGN KEY (idpais) REFERENCES pais(idpais) ON UPDATE CASCADE ON DELETE RESTRICT
);

insert into empresa (nombreempresa,nombrecomercial,telefonoprincipal,identificador,idpais,codigo,iva,metododepago,banco,ultimos) values('Forbatch SA de CV','FORBATCH','5545483772','AASL900111CP5','1','CL001MX','1','1','Bancomer','0453');
insert into empresa (nombreempresa,nombrecomercial,telefonoprincipal,identificador,idpais,codigo,iva,metododepago,banco,ultimos) values('Colcafei SA de CV','COLCAFEI','5545483772','WWRL900111TYU','1','CL002MX','1','1','Bancomer','0532');
insert into empresa (nombreempresa,nombrecomercial,telefonoprincipal,identificador,idpais,codigo,iva,metododepago,banco,ultimos) values('Yudaltep SA de CV','YUDALTEP','5545483772','UYDA456111PRE','1','CL003MX','1','1','Bancomer','9712');
insert into empresa (nombreempresa,nombrecomercial,telefonoprincipal,identificador,idpais,codigo,iva,metododepago,banco,ultimos) values('Jc Global Resours','RESOURCES','5545483772','AASL900111CP5','2','CL004MX','1','1','Santander','0954');

CREATE TABLE sucursal (
    idsucursal mediumint(8) unsigned auto_increment,
    idempresa mediumint(8) unsigned not null,   
    nombrecomercial varchar(60),
    registro TIMESTAMP not null,
    regiones varchar(1000),
    PRIMARY KEY (idsucursal),
    FOREIGN KEY (idempresa) REFERENCES empresa(idempresa) ON UPDATE CASCADE ON DELETE RESTRICT
);

CREATE TABLE estadosensucursal (
    idestadosensucursal mediumint(8) unsigned auto_increment,
    idsucursal mediumint(8) unsigned not null,  
    idestado mediumint(8) unsigned not null,      
    PRIMARY KEY (idestadosensucursal),
    FOREIGN KEY (idsucursal) REFERENCES sucursal(idsucursal) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idestado) REFERENCES estado(idestado) ON UPDATE CASCADE ON DELETE RESTRICT
);

CREATE TABLE agenda (
    idagenda mediumint(8) unsigned auto_increment,
    referencia varchar(60) not null,  
    nombre varchar(60) not null,  
    telefono1 varchar(30) not null,
    telefono2 varchar(30),
    email varchar(60) not null,  
    registro TIMESTAMP not null,
    PRIMARY KEY (idagenda)    
);

insert into agenda (referencia,nombre,telefono1,telefono2,email,registro) values('Encargado de Ventas','Lakhsmi Angarita','5545483772','5423557343','lakang7@gmail.com',now());
insert into agenda (referencia,nombre,telefono1,telefono2,email,registro) values('Encargado de Ventas','Daniela Angarita','5545483772','5423557343','isisdaniela7@hotmail.com',now());

CREATE TABLE asociacionagenda (
    idasociacionagenda mediumint(8) unsigned auto_increment,
    tipo integer not null,
    idagenda mediumint(8) unsigned not null, 
    idempresa mediumint(8) unsigned,
    idsucursal mediumint(8) unsigned,     
    idestado mediumint(8) unsigned,
    PRIMARY KEY (idasociacionagenda),
    FOREIGN KEY (idagenda) REFERENCES agenda(idagenda) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idsucursal) REFERENCES sucursal(idsucursal) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idempresa) REFERENCES empresa(idempresa) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idestado) REFERENCES estado(idestado) ON UPDATE CASCADE ON DELETE RESTRICT
);

insert into asociacionagenda (tipo,idagenda,idempresa,idsucursal,idestado) values('1','1','1',NULL,NULL);
insert into asociacionagenda (tipo,idagenda,idempresa,idsucursal,idestado) values('1','2','2',NULL,NULL);

CREATE TABLE color (
    idcolor mediumint(8) unsigned auto_increment,
    codigo varchar(30) not null, 
    nombre varchar(30) not null,
    foto varchar(120),
    registro TIMESTAMP not null,
    PRIMARY KEY (idcolor)
);

insert into color (codigo,nombre) values("WW","Blanco");
insert into color (codigo,nombre) values("BB","Negro");
insert into color (codigo,nombre) values("ST","Acero");
insert into color (codigo,nombre) values("FR","Rojo Fuego");
insert into color (codigo,nombre) values("PC","Pacífico");
insert into color (codigo,nombre) values("BR","Ladrillo");
insert into color (codigo,nombre) values("MC","Moka");
insert into color (codigo,nombre) values("LT","Latte");
insert into color (codigo,nombre) values("FT","Verde Bosque");
insert into color (codigo,nombre) values("WG","Verde Musgo");
insert into color (codigo,nombre) values("CB","Arandano");
insert into color (codigo,nombre) values("LM","Lima");
insert into color (codigo,nombre) values("TG","Mandarina");
insert into color (codigo,nombre) values("YW","Amarillo");
insert into color (codigo,nombre) values("MW","Blanco Mármol");
insert into color (codigo,nombre) values("GB","Negro Granito");
insert into color (codigo,nombre) values("G","Gris");
insert into color (codigo,nombre) values("SB","Azul Cielo");
insert into color (codigo,nombre) values("J","Jade");
insert into color (codigo,nombre) values("S","Arena");
insert into color (codigo,nombre) values("T","Terracota");

CREATE TABLE material (
    idmaterial mediumint(8) unsigned auto_increment,
    codigo varchar(30) not null, 
    nombre varchar(120) not null,
    colores varchar(1200),
    registro TIMESTAMP not null,
    dias integer not null,
    PRIMARY KEY (idmaterial)
);

insert into material (codigo,nombre,colores,registro,dias) values('CLASICO','Clasico','Blanco, Negro, Acero, Rojo Fuego, Pacífico, Ladrillo, Moka, Latte, Verde Bosque, Verde Musgo, Arandano, Lima, Mandarina, Amarillo, Blanco Mármol, Negro Granito, Gris, Azul Cielo, Jade, Arena, Terracota',now(),28);
insert into material (codigo,nombre,colores,registro,dias) values('HOT','Anodizado','Gris',now(),42);
 
CREATE TABLE colorenmaterial (
    idcolorenmaterial mediumint(8) unsigned auto_increment,
    idmaterial mediumint(8) unsigned not null,
    idcolor mediumint(8) unsigned not null,
    registro TIMESTAMP not null,
    PRIMARY KEY (idcolorenmaterial),
    FOREIGN KEY (idmaterial) REFERENCES material(idmaterial) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idcolor) REFERENCES color(idcolor) ON UPDATE CASCADE ON DELETE RESTRICT
);

insert into colorenmaterial (idmaterial,idcolor,registro) values(1,1,now());
insert into colorenmaterial (idmaterial,idcolor,registro) values(1,2,now());
insert into colorenmaterial (idmaterial,idcolor,registro) values(1,3,now());
insert into colorenmaterial (idmaterial,idcolor,registro) values(1,4,now());
insert into colorenmaterial (idmaterial,idcolor,registro) values(1,5,now());
insert into colorenmaterial (idmaterial,idcolor,registro) values(1,6,now());
insert into colorenmaterial (idmaterial,idcolor,registro) values(1,7,now());
insert into colorenmaterial (idmaterial,idcolor,registro) values(1,8,now());
insert into colorenmaterial (idmaterial,idcolor,registro) values(1,9,now());
insert into colorenmaterial (idmaterial,idcolor,registro) values(1,10,now());
insert into colorenmaterial (idmaterial,idcolor,registro) values(1,11,now());
insert into colorenmaterial (idmaterial,idcolor,registro) values(1,12,now());
insert into colorenmaterial (idmaterial,idcolor,registro) values(1,13,now());
insert into colorenmaterial (idmaterial,idcolor,registro) values(1,14,now());
insert into colorenmaterial (idmaterial,idcolor,registro) values(1,15,now());
insert into colorenmaterial (idmaterial,idcolor,registro) values(1,16,now());
insert into colorenmaterial (idmaterial,idcolor,registro) values(1,17,now());
insert into colorenmaterial (idmaterial,idcolor,registro) values(1,18,now());
insert into colorenmaterial (idmaterial,idcolor,registro) values(1,19,now());
insert into colorenmaterial (idmaterial,idcolor,registro) values(1,20,now());
insert into colorenmaterial (idmaterial,idcolor,registro) values(1,21,now());

insert into colorenmaterial (idmaterial,idcolor,registro) values(2,17,now());

CREATE TABLE categoriaproducto (
    idcategoriaproducto mediumint(8) unsigned auto_increment,
    nombreespanol varchar(60) not null,
    nombreingles varchar(60) not null,
    PRIMARY KEY (idcategoriaproducto)    
);

insert into categoriaproducto (nombreespanol,nombreingles) values ("Redondo","Round");
insert into categoriaproducto (nombreespanol,nombreingles) values ("Cuadrado","Square");
insert into categoriaproducto (nombreespanol,nombreingles) values ("Rectangular","Rectangle");
insert into categoriaproducto (nombreespanol,nombreingles) values ("Triangulares","Triangle");
insert into categoriaproducto (nombreespanol,nombreingles) values ("Ovalados","Oval");
insert into categoriaproducto (nombreespanol,nombreingles) values ("Servicio de Ensaladas","Salad Service");
insert into categoriaproducto (nombreespanol,nombreingles) values ("Salseras y Condimentos","Condiment Service");
insert into categoriaproducto (nombreespanol,nombreingles) values ("Fiesta","Fiesta");
insert into categoriaproducto (nombreespanol,nombreingles) values ("Display","Display");
insert into categoriaproducto (nombreespanol,nombreingles) values ("Insertos","Food Pans");
insert into categoriaproducto (nombreespanol,nombreingles) values ("Organizadores","Tile System");
insert into categoriaproducto (nombreespanol,nombreingles) values ("Bases","Stands");

CREATE TABLE patronproducto (
    idpatronproducto mediumint(8) unsigned auto_increment,
    idcategoriaproducto mediumint(8) unsigned not null,
    nombreespanol varchar(60) not null,
    nombreingles varchar(60) not null,
    foto varchar(120),
    materiales varchar(1200),
    registro TIMESTAMP not null,   
    PRIMARY KEY (idpatronproducto) 
);

CREATE TABLE materialespatron (
    idmaterialespatron mediumint(8) unsigned auto_increment,
    idpatronproducto mediumint(8) unsigned not null,
    idmaterial mediumint(8) unsigned not null,    
    registro TIMESTAMP not null,
    PRIMARY KEY (idmaterialespatron),
    FOREIGN KEY (idpatronproducto) REFERENCES patronproducto(idpatronproducto) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idmaterial) REFERENCES material(idmaterial) ON UPDATE CASCADE ON DELETE RESTRICT    
);

CREATE TABLE categoriatipo (
    idcategoriatipo mediumint(8) unsigned auto_increment,
    tipocategoria varchar(60) not null,
    registro TIMESTAMP not null,
    PRIMARY KEY (idcategoriatipo)
);

insert into categoriatipo (tipocategoria) values ("Catalogo");
insert into categoriatipo (tipocategoria) values ("Especiales");
insert into categoriatipo (tipocategoria) values ("Anodizados");

CREATE TABLE tipoproducto (
    idtipoproducto mediumint(8) unsigned auto_increment,
    idcategoriatipo mediumint(8) unsigned not null,
    codig varchar(10) not null,
    nombre varchar(60) not null,
    portipo numeric(5,3) not null,
    registro TIMESTAMP not null,
    PRIMARY KEY (idtipoproducto)
);

insert into tipoproducto (idcategoriatipo,codig,nombre,portipo) values (1,"CATVIEJO15","Catalogo 2015",4.3);
insert into tipoproducto (idcategoriatipo,codig,nombre,portipo) values (1,"CATNUEVO16","Catalogo 2016",7);
insert into tipoproducto (idcategoriatipo,codig,nombre,portipo) values (3,"ANODIZADO","Productos Anodizados",7);
insert into tipoproducto (idcategoriatipo,codig,nombre,portipo) values (2,"ESPECIALES","Productos Especiales",7);

CREATE TABLE producto (
    idproducto mediumint(8) unsigned auto_increment,  
    idtipoproducto mediumint(8) unsigned not null,
    idpatronproducto mediumint(8) unsigned not null,
    idmaterial mediumint(8) unsigned not null,
    catexportacion varchar(30) null,
    codigo varchar(30) not null,     
    descripcion varchar(200) not null, 
    descripcioning varchar(200) null,
    dimensionlargo varchar(50) not null,
    dimensionancho varchar(50) not null,
    dimensionalto varchar(50) not null,
    peso numeric(4,1),
    capacidad numeric(4,1),
    preciofabrica numeric(6,2) not null,
    regalias numeric(6,2) not null,
    estandarizado numeric(6,2) not null,        
    registro TIMESTAMP not null,
    PRIMARY KEY (idproducto),
    FOREIGN KEY (idtipoproducto) REFERENCES tipoproducto(idtipoproducto) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idpatronproducto) REFERENCES patronproducto(idpatronproducto) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idmaterial) REFERENCES material(idmaterial) ON UPDATE CASCADE ON DELETE RESTRICT
);

CREATE TABLE historicopreciofabrica (
    idhistoricopreciofabrica mediumint(8) unsigned auto_increment,
    idproducto mediumint(8) unsigned not null,
    preciofabrica numeric(6,2) not null,
    desde TIMESTAMP not null DEFAULT CURRENT_TIMESTAMP,
    hasta TIMESTAMP null DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (idhistoricopreciofabrica),
    FOREIGN KEY (idproducto) REFERENCES producto(idproducto) ON UPDATE CASCADE ON DELETE RESTRICT
);

CREATE TABLE listadeprecios (
    idlistadeprecios mediumint(8) unsigned auto_increment,
    nombre varchar(90) not null,
    columnaprecios varchar(5) not null,
    columnaexcepcion varchar(5) not null,
    texto varchar(1200) not null,
    registro TIMESTAMP not null,    
    PRIMARY KEY (idlistadeprecios)    
);

CREATE TABLE empresaslista (
    idempresalista mediumint(8) unsigned auto_increment,
    idlistadeprecios mediumint(8) unsigned not null,
    idempresa mediumint(8) unsigned not null,
    PRIMARY KEY (idempresalista),
    FOREIGN KEY (idlistadeprecios) REFERENCES listadeprecios(idlistadeprecios) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idempresa) REFERENCES empresa(idempresa) ON UPDATE CASCADE ON DELETE RESTRICT
);

CREATE TABLE productoslista (
    idproductoslista mediumint(8) unsigned auto_increment,
    idlistadeprecios mediumint(8) unsigned not null,
    idproducto mediumint(8) unsigned not null,
    precio numeric(6,2) not null,
    excepcion numeric (6,2) null,
    PRIMARY KEY (idproductoslista),   
    FOREIGN KEY (idlistadeprecios) REFERENCES listadeprecios(idlistadeprecios) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idproducto) REFERENCES producto(idproducto) ON UPDATE CASCADE ON DELETE RESTRICT
);

CREATE TABLE configuracionsistema (
    idconfiguracionsistema mediumint(8) unsigned not null,
    regalias numeric(5,3) not null,
    codigoclasica varchar(30) not null,
    poriva numeric(5,3) not null,
    secuenciaoc mediumint(8) unsigned,
    secuenciaop mediumint(8) unsigned,
    facturacionempresa varchar(60),
    facturacioncalle varchar(60),
    facturacionext varchar(60),
    facturacionint varchar(60),
    facturacioncolonia varchar(60),
    facturacionpostal varchar(60),
    facturacionestpais varchar(60),
    facturacionrfc varchar(25),
    cambio numeric(5,3) not null,
    serie varchar(20) not null, 
    folio integer not null,
    carpetabusqueda varchar(60) not null,
    rfcextranjero varchar(25) not null,
    servidor varchar(60) not null,
    puerto varchar(6) not null,
    correo varchar(60) not null,
    password varchar(30) not null,
    correofabrica varchar(60) not null,
    PRIMARY KEY (idconfiguracionsistema)
);

insert into configuracionsistema (idconfiguracionsistema,regalias,codigoclasica,poriva,secuenciaoc, secuenciaop,facturacionempresa,facturacioncalle,facturacionext,facturacionint,facturacioncolonia,facturacionpostal,facturacionestpais,facturacionrfc,cambio,serie,folio,carpetabusqueda,rfcextranjero,servidor,puerto,correo,password,correofabrica) values(1,10,'CLASICA',16,2300,4000,'IMMANTI, S.A. DE C.V.','Av. Uno','54','206','San Pedro de los Pinos','03800','México, D.F.','IMM010209S23','19.10','B','15','GOYA780416GM0','XEXX010101000','mail.elabcnaturista.com','26','contacto@elabcnaturista.com','Wl23428mt','lakang7@gmail.com');

CREATE TABLE historicoregalias (
    idhistoricoregalias mediumint(8) unsigned auto_increment,
    porcentajeregalias numeric(5,3) not null,
    desde TIMESTAMP not null DEFAULT CURRENT_TIMESTAMP,
    hasta TIMESTAMP null DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (idhistoricoregalias)
);

insert into historicoregalias (porcentajeregalias,desde,hasta) values(10,now(),null);

CREATE TABLE historicoporiva (
    idhistoricoporiva mediumint(8) unsigned auto_increment,
    porcentajeiva numeric(5,3) not null,
    desde TIMESTAMP not null DEFAULT CURRENT_TIMESTAMP,
    hasta TIMESTAMP null DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (idhistoricoporiva)
);

insert into historicoporiva (porcentajeiva,desde,hasta) values(16,now(),null);

CREATE TABLE historicocambiodolar (
    idhistoricocambiodolar mediumint(8) unsigned auto_increment,
    cambio numeric(5,3) not null,
    desde TIMESTAMP not null DEFAULT CURRENT_TIMESTAMP,
    hasta TIMESTAMP null DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (idhistoricocambiodolar)
);

insert into historicocambiodolar (cambio,desde,hasta) values(19.100,now(),null);

CREATE TABLE ordendecompra(
    idordendecompra mediumint(8) unsigned auto_increment,
    codigooc varchar(12) not null,
    codigoop varchar(12) not null,
    codigoexterno varchar(12) not null,
    fechadecreacion TIMESTAMP not null,
    fechaderegistro date not null,
    tipo integer not null,
    idempresa mediumint(8) unsigned null,
    idsucursal mediumint(8) unsigned null,
    idestado mediumint(8) unsigned null,
    idagenda01 mediumint(8) unsigned null,    
    idagenda02 mediumint(8) unsigned null,
    idagenda03 mediumint(8) unsigned null,
    idlistadeprecios mediumint(8) unsigned null,    
    idusuario mediumint(8) unsigned not null,
    subtotal numeric(10,2) not null,
    poriva numeric(10,2) not null,
    iva numeric(10,2) not null,
    total numeric(10,2) not null,
    prioridad integer not null,
    fechadeentrega date not null,
    condiciones integer not null,
    paqueteria varchar(30) not null,
    observaciones varchar(300) not null,
    estatus integer not null,
    conpago integer not null,
    comfacturacion varchar(1200),
    PRIMARY KEY (idordendecompra),
    FOREIGN KEY (idempresa) REFERENCES empresa(idempresa) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idsucursal) REFERENCES sucursal(idsucursal) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idestado) REFERENCES estado(idestado) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idagenda01) REFERENCES agenda(idagenda) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idagenda02) REFERENCES agenda(idagenda) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idagenda03) REFERENCES agenda(idagenda) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idlistadeprecios) REFERENCES listadeprecios(idlistadeprecios) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idusuario) REFERENCES usuario(idusuario) ON UPDATE CASCADE ON DELETE RESTRICT    
);

CREATE TABLE ordendeproduccion(
    idordendeproduccion mediumint(8) unsigned auto_increment,
    idordendecompra mediumint(8) unsigned null,
    codigoop varchar(12) not null, 
    fechadecreacion TIMESTAMP not null, 
    fechaderegistro date not null,     
    idempresa mediumint(8) unsigned null,
    idsucursal mediumint(8) unsigned null,
    idestado mediumint(8) unsigned null,
    idagenda01 mediumint(8) unsigned null,    
    idagenda02 mediumint(8) unsigned null,
    idagenda03 mediumint(8) unsigned null,
    idlistadeprecios mediumint(8) unsigned null,
    idusuariocrea mediumint(8) unsigned not null,
    idusuarioresponsable mediumint(8) unsigned not null, 
    subtotal numeric(10,2) not null,
    poriva numeric(10,2) not null,
    iva numeric(10,2) not null,
    total numeric(10,2) not null,
    prioridad integer not null,
    fechadeentrega date not null, 
    tipoempaque integer not null,
    estatus integer not null,
    PRIMARY KEY (idordendeproduccion),
    FOREIGN KEY (idordendecompra) REFERENCES ordendecompra(idordendecompra) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idempresa) REFERENCES empresa(idempresa) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idsucursal) REFERENCES sucursal(idsucursal) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idestado) REFERENCES estado(idestado) ON UPDATE CASCADE ON DELETE RESTRICT,    
    FOREIGN KEY (idagenda01) REFERENCES agenda(idagenda) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idagenda02) REFERENCES agenda(idagenda) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idagenda03) REFERENCES agenda(idagenda) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idlistadeprecios) REFERENCES listadeprecios(idlistadeprecios) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idusuariocrea) REFERENCES usuario(idusuario) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idusuarioresponsable) REFERENCES usuario(idusuario) ON UPDATE CASCADE ON DELETE RESTRICT
);

CREATE TABLE regalias(
    idregalias mediumint(8) unsigned auto_increment,
    idordendeproduccion mediumint(8) unsigned not null,
    idempresa mediumint(8) unsigned not null,
    monto numeric(10,2) not null,
    cancelado numeric(10,2) not null,
    resta numeric(10,2) not null,
    fechadecreacion TIMESTAMP not null,
    estatus integer not null,
    PRIMARY KEY (idregalias),
    FOREIGN KEY (idordendeproduccion) REFERENCES ordendeproduccion(idordendeproduccion) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idempresa) REFERENCES empresa(idempresa) ON UPDATE CASCADE ON DELETE RESTRICT    
);

CREATE TABLE pagoregalias(
    idpagoregalias mediumint(8) unsigned auto_increment,
    idusuario mediumint(8) unsigned not null,
    idregalias mediumint(8) unsigned not null,
    fecharegistro TIMESTAMP not null DEFAULT CURRENT_TIMESTAMP, 
    fechapago date not null,
    monto numeric(10,2) not null, 
    tipopago integer not null,
    referencia varchar(20) not null,
    PRIMARY KEY (idpagoregalias),  
    FOREIGN KEY (idusuario) REFERENCES usuario(idusuario) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idregalias) REFERENCES regalias(idregalias) ON UPDATE CASCADE ON DELETE RESTRICT
);

CREATE TABLE productosordenproduccion(
    idproductosordenproduccion mediumint(8) unsigned auto_increment,
    idordendeproduccion mediumint(8) unsigned not null,
    idproducto mediumint(8) unsigned not null, 
    idcolor  mediumint(8) unsigned not null, 
    preciofabrica numeric(5,2) not null,
    numerodeunidades integer not null,
    PRIMARY KEY (idproductosordenproduccion),
    FOREIGN KEY (idordendeproduccion) REFERENCES ordendeproduccion(idordendeproduccion) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idcolor) REFERENCES color(idcolor) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idproducto) REFERENCES producto(idproducto) ON UPDATE CASCADE ON DELETE RESTRICT
);

CREATE TABLE productosordencompra(
    idproductosordencompra mediumint(8) unsigned auto_increment,
    idordendecompra mediumint(8) unsigned not null,
    idproducto mediumint(8) unsigned not null, 
    idcolor  mediumint(8) unsigned not null, 
    preciofabrica numeric(5,2) not null,
    precioventa numeric(5,2) not null,
    numerodeunidades integer not null,
    PRIMARY KEY (idproductosordencompra),
    FOREIGN KEY (idordendecompra) REFERENCES ordendecompra(idordendecompra) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idcolor) REFERENCES color(idcolor) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idproducto) REFERENCES producto(idproducto) ON UPDATE CASCADE ON DELETE RESTRICT
);

CREATE TABLE factura(
    idfactura mediumint(8) unsigned auto_increment,
    idagenda mediumint(8) unsigned null,
    idempresa mediumint(8) unsigned null,    
    idordendecompra mediumint(8) unsigned null,      
    emision TIMESTAMP not null,     
    serie varchar(20) not null,
    folio mediumint(8) unsigned null,
    subtotal numeric(10,2) not null,
    poriva numeric(10,2) not null,
    iva numeric(10,2) not null,
    total numeric(10,2) not null,
    pdf varchar(60) not null,
    xml varchar(60) not null,
    resta numeric(10,2) not null,
    estatus integer not null,
    PRIMARY KEY (idfactura),
    FOREIGN KEY (idordendecompra) REFERENCES ordendecompra(idordendecompra) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idempresa) REFERENCES empresa(idempresa) ON UPDATE CASCADE ON DELETE RESTRICT,    
    FOREIGN KEY (idagenda) REFERENCES agenda(idagenda) ON UPDATE CASCADE ON DELETE RESTRICT
);

CREATE TABLE pago(
    idpago mediumint(8) unsigned auto_increment,
    idusuario mediumint(8) unsigned not null,
    idfactura mediumint(8) unsigned not null,
    fecharegistro TIMESTAMP not null, 
    fechapago date not null,
    monto numeric(10,2) not null, 
    tipopago integer not null,
    referencia varchar(20) not null,
    PRIMARY KEY (idpago),  
    FOREIGN KEY (idusuario) REFERENCES usuario(idusuario) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idfactura) REFERENCES factura(idfactura) ON UPDATE CASCADE ON DELETE RESTRICT
);


CREATE TABLE notadecredito(
    idnotadecredito mediumint(8) unsigned auto_increment,
    idfactura mediumint(8) unsigned not null,
    emision TIMESTAMP not null,     
    serie varchar(20) not null,
    folio mediumint(8) unsigned null,
    subtotal numeric(10,2) not null,
    poriva numeric(10,2) not null,
    iva numeric(10,2) not null,
    total numeric(10,2) not null,
    pdf varchar(60) not null,
    xml varchar(60) not null,
    PRIMARY KEY (idnotadecredito),
    FOREIGN KEY (idfactura) REFERENCES factura(idfactura) ON UPDATE CASCADE ON DELETE RESTRICT    
);

CREATE TABLE pagoop(
    idpagoop mediumint(8) unsigned auto_increment,
    idusuario mediumint(8) unsigned not null,
    idordendeproduccion mediumint(8) unsigned not null,
    fecharegistro TIMESTAMP not null DEFAULT CURRENT_TIMESTAMP, 
    fechapago date not null,
    monto numeric(10,2) not null, 
    tipopago integer not null,
    referencia varchar(20) not null,
    PRIMARY KEY (idpagoop),  
    FOREIGN KEY (idusuario) REFERENCES usuario(idusuario) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (idordendeproduccion) REFERENCES ordendeproduccion(idordendeproduccion) ON UPDATE CASCADE ON DELETE RESTRICT
);

